{% extends "base.html" %}

{% block content %}
<div class="section">
    <h1>PURPLE HAT Dashboard</h1>
    
    <div class="dashboard-grid">
        <div class="stat-card">
            <div class="stat-label">Total Scans</div>
            <div class="stat-value">{{ stats.total_scans }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Vulnerabilities Found</div>
            <div class="stat-value">{{ stats.vulnerabilities_found }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Last Scan</div>
            <div class="stat-value">-</div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">Quick Actions</div>
        <a href="{{ url_for('scan') }}" class="btn btn-primary">Start New Scan</a>
        <a href="{{ url_for('results') }}" class="btn btn-secondary">View Results</a>
    </div>

    <div class="card">
        <div class="card-title">Recent Scans</div>
        <table>
            <thead>
                <tr>
                    <th>Target</th>
                    <th>Mode</th>
                    <th>Status</th>
                    <th>Vulnerabilities</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>No scans yet</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<style>
    .section {
        animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
{% endblock %}

{% block scripts %}
<script>
    // Dashboard functionality
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Dashboard loaded');
    });
</script>{% endblock %}
            <label>Ports (comma list, optional)</label>
            <input name="ports" placeholder="80,443,8080" />
            <label>Threads</label>
            <input name="threads" placeholder="20" />
            <div style="margin-top:10px"><button type="submit">Scan Ports</button></div>
          </form>
        </div>

        <div class="card">
          <h3>SQLMap (local)</h3>
          <p class="minor">Run sqlmap using local copy and get a parsed summary</p>
          <form method="POST" action="/scan/sqlmap">
            <label>Target (or leave blank and use args)</label>
            <input name="target" placeholder="https://example.com" />
            <label>Custom args (optional)</label>
            <input name="args" placeholder="-u https://target.com -p id --batch" />
            <div style="margin-top:10px"><button type="submit">Run sqlmap</button></div>
          </form>
        </div>

        <div class="card">
          <h3>XSS Quickcheck</h3>
          <p class="minor">Try a set of XSS payloads against a single param</p>
          <form method="POST" action="/scan/xss">
            <label>Target</label>
            <input name="target" placeholder="https://example.com" />
            <label>Param name (default q)</label>
            <input name="param" placeholder="q" />
            <div style="margin-top:10px"><button type="submit">Run XSS quickcheck</button></div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
